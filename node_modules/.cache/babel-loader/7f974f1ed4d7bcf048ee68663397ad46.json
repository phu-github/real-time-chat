{"ast":null,"code":"var _s = $RefreshSig$();\n\nimport React, { useEffect, useState } from 'react';\nimport { auth, db } from '../firebase/config';\n\nconst useFireStore = (collection, condition) => {\n  _s();\n\n  const [documents, setDocument] = useState([]);\n  useEffect(() => {\n    let collectionRef = db.collection(collection).orderBy('created_at'); //condition\n\n    /*\r\n        fieldName:'abc'\r\n        operator: '=='\r\n        compareValue: 'abc' \r\n     */\n\n    if (condition) {\n      // Check nếu n\n      if (!condition.compareValue || !condition.compareValue.length) {\n        return;\n      }\n\n      collectionRef = collectionRef.where(condition.fieldName, condition.operator, condition.compareValue);\n    }\n\n    const unsubscribed = collectionRef.onSnapshot(snapshot => {\n      const documents = snapshot.docs.map(doc => ({ ...doc.data(),\n        id: doc.id\n      }));\n      setDocument(documents);\n      console.log('========= documents rooms: ', documents);\n    });\n    return unsubscribed;\n  }, [collection, condition]);\n};\n\n_s(useFireStore, \"Kab44WnoivDLd0NOLOqsKcJadtY=\");\n\nexport default useFireStore;","map":{"version":3,"sources":["D:/Project Reactjs/Real-time/real-time-chat/src/hooks/useFireStore.js"],"names":["React","useEffect","useState","auth","db","useFireStore","collection","condition","documents","setDocument","collectionRef","orderBy","compareValue","length","where","fieldName","operator","unsubscribed","onSnapshot","snapshot","docs","map","doc","data","id","console","log"],"mappings":";;AAAA,OAAOA,KAAP,IAAgBC,SAAhB,EAA2BC,QAA3B,QAA2C,OAA3C;AACA,SAAQC,IAAR,EAAcC,EAAd,QAAuB,oBAAvB;;AAGC,MAAOC,YAAY,GAAG,CAACC,UAAD,EAAaC,SAAb,KAA4B;AAAA;;AAC/C,QAAM,CAACC,SAAD,EAAYC,WAAZ,IAA2BP,QAAQ,CAAC,EAAD,CAAzC;AAEAD,EAAAA,SAAS,CAAC,MAAI;AACV,QAAIS,aAAa,GAAGN,EAAE,CAACE,UAAH,CAAcA,UAAd,EAA0BK,OAA1B,CAAkC,YAAlC,CAApB,CADU,CAGV;;AACA;AACR;AACA;AACA;AACA;;AACQ,QAAIJ,SAAJ,EAAe;AACX;AACA,UAAG,CAACA,SAAS,CAACK,YAAX,IAA2B,CAACL,SAAS,CAACK,YAAV,CAAuBC,MAAtD,EAA6D;AACzD;AACH;;AACDH,MAAAA,aAAa,GAAGA,aAAa,CAACI,KAAd,CACZP,SAAS,CAACQ,SADE,EAEZR,SAAS,CAACS,QAFE,EAGZT,SAAS,CAACK,YAHE,CAAhB;AAIH;;AAED,UAAMK,YAAY,GAAGP,aAAa,CAACQ,UAAd,CAA0BC,QAAD,IAAY;AACtD,YAAMX,SAAS,GAAGW,QAAQ,CAACC,IAAT,CAAcC,GAAd,CAAmBC,GAAD,KAAQ,EACxC,GAAGA,GAAG,CAACC,IAAJ,EADqC;AAExCC,QAAAA,EAAE,EAAEF,GAAG,CAACE;AAFgC,OAAR,CAAlB,CAAlB;AAIAf,MAAAA,WAAW,CAACD,SAAD,CAAX;AACAiB,MAAAA,OAAO,CAACC,GAAR,CAAY,6BAAZ,EAA0ClB,SAA1C;AACH,KAPoB,CAArB;AASA,WAAOS,YAAP;AACH,GA9BQ,EA8BP,CAACX,UAAD,EAAaC,SAAb,CA9BO,CAAT;AA+BH,CAlCA;;GAAOF,Y;;AAoCR,eAAeA,YAAf","sourcesContent":["import React, { useEffect, useState } from 'react';\r\nimport {auth, db} from '../firebase/config';\r\n\r\n\r\n const  useFireStore = (collection, condition ) => {\r\n    const [documents, setDocument] = useState([]);\r\n\r\n    useEffect(()=>{\r\n        let collectionRef = db.collection(collection).orderBy('created_at');\r\n        \r\n        //condition\r\n        /*\r\n            fieldName:'abc'\r\n            operator: '=='\r\n            compareValue: 'abc' \r\n         */\r\n        if (condition) {\r\n            // Check nếu n\r\n            if(!condition.compareValue || !condition.compareValue.length){\r\n                return;\r\n            }\r\n            collectionRef = collectionRef.where(\r\n                condition.fieldName,\r\n                condition.operator,\r\n                condition.compareValue )\r\n        }\r\n\r\n        const unsubscribed = collectionRef.onSnapshot((snapshot)=>{\r\n            const documents = snapshot.docs.map((doc)=>({\r\n                ...doc.data(),\r\n                id: doc.id,\r\n            }));\r\n            setDocument(documents);\r\n            console.log('========= documents rooms: ',documents);\r\n        });\r\n\r\n        return unsubscribed; \r\n    },[collection, condition]);\r\n}\r\n\r\nexport default useFireStore;"]},"metadata":{},"sourceType":"module"}