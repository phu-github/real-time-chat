{"ast":null,"code":"import _slicedToArray from\"D:/Project Reactjs/Real-time/real-time-chat/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import React,{useState}from'react';import{useHistory}from'react-router-dom';import firebase,{auth}from'../firebase/config';import{Spin}from'antd';import{jsx as _jsx}from\"react/jsx-runtime\";export var AuthContext=/*#__PURE__*/React.createContext();function AuthProvider(_ref){var children=_ref.children;var history=useHistory();var _useState=useState({}),_useState2=_slicedToArray(_useState,2),user=_useState2[0],setUser=_useState2[1];var _useState3=useState(true),_useState4=_slicedToArray(_useState3,2),isLoading=_useState4[0],setIsLoading=_useState4[1];React.useEffect(function(){var unsubscribed=auth.onAuthStateChanged(function(user){console.log({user:user});if(user){var displayName=user.displayName,email=user.email,uid=user.uid,photoURL=user.photoURL;setUser({displayName:displayName,email:email,uid:uid,photoURL:photoURL});setIsLoading(false);history.push('/');}history.push('/login');});// cleanup function\nreturn function(){unsubscribed();};},[history]);return/*#__PURE__*/_jsx(AuthContext.Provider,{value:{user:user},children:isLoading?/*#__PURE__*/_jsx(Spin,{}):children});}export default AuthProvider;","map":{"version":3,"sources":["D:/Project Reactjs/Real-time/real-time-chat/src/Context/AuthProvider.js"],"names":["React","useState","useHistory","firebase","auth","Spin","AuthContext","createContext","AuthProvider","children","history","user","setUser","isLoading","setIsLoading","useEffect","unsubscribed","onAuthStateChanged","console","log","displayName","email","uid","photoURL","push"],"mappings":"kKAAA,MAAOA,CAAAA,KAAP,EAAgBC,QAAhB,KAAgC,OAAhC,CACA,OAAQC,UAAR,KAAyB,kBAAzB,CACA,MAAOC,CAAAA,QAAP,EAAmBC,IAAnB,KAA+B,oBAA/B,CACA,OAASC,IAAT,KAAqB,MAArB,C,2CAEA,MAAO,IAAMC,CAAAA,WAAW,cAAGN,KAAK,CAACO,aAAN,EAApB,CACP,QAASC,CAAAA,YAAT,MAAoC,IAAZC,CAAAA,QAAY,MAAZA,QAAY,CAChC,GAAMC,CAAAA,OAAO,CAAGR,UAAU,EAA1B,CACA,cAAwBD,QAAQ,CAAC,EAAD,CAAhC,wCAAOU,IAAP,eAAaC,OAAb,eACA,eAAkCX,QAAQ,CAAC,IAAD,CAA1C,yCAAOY,SAAP,eAAkBC,YAAlB,eAEAd,KAAK,CAACe,SAAN,CAAgB,UAAI,CAChB,GAAMC,CAAAA,YAAY,CAAGZ,IAAI,CAACa,kBAAL,CAAwB,SAACN,IAAD,CAAQ,CACjDO,OAAO,CAACC,GAAR,CAAY,CAACR,IAAI,CAAJA,IAAD,CAAZ,EACA,GAAGA,IAAH,CAAQ,CACJ,GAAOS,CAAAA,WAAP,CAA4CT,IAA5C,CAAOS,WAAP,CAAoBC,KAApB,CAA4CV,IAA5C,CAAoBU,KAApB,CAA2BC,GAA3B,CAA4CX,IAA5C,CAA2BW,GAA3B,CAAgCC,QAAhC,CAA4CZ,IAA5C,CAAgCY,QAAhC,CACAX,OAAO,CAAC,CACJQ,WAAW,CAAXA,WADI,CAEJC,KAAK,CAALA,KAFI,CAGJC,GAAG,CAAHA,GAHI,CAIJC,QAAQ,CAARA,QAJI,CAAD,CAAP,CAMAT,YAAY,CAAC,KAAD,CAAZ,CACAJ,OAAO,CAACc,IAAR,CAAa,GAAb,EACH,CACDd,OAAO,CAACc,IAAR,CAAa,QAAb,EACH,CAdoB,CAArB,CAeA;AACA,MAAO,WAAI,CACPR,YAAY,GACf,CAFD,CAGH,CApBD,CAoBE,CAACN,OAAD,CApBF,EAsBA,mBACI,KAAC,WAAD,CAAa,QAAb,EAAsB,KAAK,CAAE,CAAEC,IAAI,CAAJA,IAAF,CAA7B,UACKE,SAAS,cAAG,KAAC,IAAD,IAAH,CAAcJ,QAD5B,EADJ,CAKH,CAED,cAAeD,CAAAA,YAAf","sourcesContent":["import React, { useState } from 'react';\r\nimport {useHistory} from 'react-router-dom';\r\nimport firebase, { auth } from '../firebase/config';\r\nimport { Spin } from 'antd';\r\n\r\nexport const AuthContext = React.createContext()\r\nfunction AuthProvider({ children }) {\r\n    const history = useHistory();\r\n    const [user, setUser] = useState({});\r\n    const [isLoading, setIsLoading] = useState(true);\r\n\r\n    React.useEffect(()=>{\r\n        const unsubscribed = auth.onAuthStateChanged((user)=>{\r\n            console.log({user});\r\n            if(user){\r\n                const {displayName, email, uid, photoURL} = user;\r\n                setUser({\r\n                    displayName,\r\n                    email, \r\n                    uid,\r\n                    photoURL\r\n                });\r\n                setIsLoading(false);\r\n                history.push('/');\r\n            }\r\n            history.push('/login');\r\n        });\r\n        // cleanup function\r\n        return ()=>{\r\n            unsubscribed(); \r\n        }\r\n    },[history]);\r\n \r\n    return (\r\n        <AuthContext.Provider value={{ user }}>\r\n            {isLoading ? <Spin /> : children}\r\n        </AuthContext.Provider> \r\n    );\r\n}\r\n\r\nexport default AuthProvider;"]},"metadata":{},"sourceType":"module"}